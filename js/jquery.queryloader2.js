(function(a){var b=new Array;var c=0;var d="";var e="";var f="";var g="";var h=0;var i={onComplete:function(){},backgroundColor:"#000",barColor:"#fff",barHeight:1,percentage:false,deepSearch:true,completeAnimation:"fade",onLoadComplete:function(){if(i.completeAnimation=="grow"){a(f).stop().css("width","100%").animate({top:"0%",height:"100%"},500,function(){a(e).fadeOut(500,function(){a(this).remove();i.onComplete()})})}else{a(e).fadeOut(500,function(){a(e).remove();i.onComplete()})}}};var j=function(){k();o()};var k=function(){d=a("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});for(var c=0;b.length>c;c++){a.ajax({url:b[c],type:"HEAD",success:function(a){h++;l(this["url"])}})}};var l=function(b){var c=a("<img />").attr("src",b).bind("load",function(){m()}).appendTo(d)};var m=function(){c++;var b=c/h*100;a(f).stop().animate({width:b+"%"},200);if(i.percentage==true){a(g).text(Math.ceil(b)+"%")}if(c==h){n()}};var n=function(){a(d).remove();i.onLoadComplete()};var o=function(){e=a("<div id='qLoverlay'></div>").css({width:"100%",height:"100%",backgroundColor:i.backgroundColor,backgroundPosition:"fixed",position:"fixed",zIndex:666999,top:0,left:0}).appendTo("body");f=a("<div id='qLbar'></div>").css({height:i.barHeight+"px",marginTop:"-"+i.barHeight/2+"px",backgroundColor:i.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(e);if(i.percentage==true){g=a("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute",fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+i.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:i.barColor}).appendTo(e)}};var p=function(c){var d="";if(a(c).css("background-image")!="none"){var d=a(c).css("background-image")}else if(typeof a(c).attr("src")!="undefined"&&c.nodeName.toLowerCase()=="img"){var d=a(c).attr("src")}if(d.indexOf("gradient")==-1){d=d.replace(/url\(\"/g,"");d=d.replace(/url\(/g,"");d=d.replace(/\"\)/g,"");d=d.replace(/\)/g,"");var e=d.split(", ");for(var f=0;f<e.length;f++){if(e[f].length>0){var g="";if(a.browser.msie&&a.browser.version<9){g="?"+Math.floor(Math.random()*3e3)}b.push(e[f]+g)}}}};a.fn.queryLoader2=function(b){if(b){a.extend(i,b)}this.each(function(){p(this);if(i.deepSearch==true){a(this).find("*:not(script)").each(function(){p(this)})}});j();return this}})(jQuery)